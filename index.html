<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Smart Mirror Uhr + Wetter</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #000000;
    color: #ffffff;
    font-family: Arial, Helvetica, sans-serif;
}

#container {
    position: absolute;
    top: 30px;
    left: 30px;
}

#clock {
    font-size: 96px;
    font-weight: 700;
}

#date {
    margin-top: 10px;
    font-size: 32px;
    text-align: center;
}

#weather {
    margin-top: 15px;
    font-size: 36px;
    text-align: center;
}
</style>
</head>

<body>
<div id="container">
    <div id="clock">--:--:--</div>
    <div id="date">--</div>
    <div id="weather"></div>
</div>

<script>
// ===== UHR + DATUM =====
var months = [
    "Januar","Februar","MÃ¤rz","April","Mai","Juni",
    "Juli","August","September","Oktober","November","Dezember"
];

function updateClock() {
    var now = new Date();
    var h = now.getHours();
    var m = now.getMinutes();
    var s = now.getSeconds();

    if (h < 10) h = "0" + h;
    if (m < 10) m = "0" + m;
    if (s < 10) s = "0" + s;

    document.getElementById("clock").innerHTML = h + ":" + m + ":" + s;
    document.getElementById("date").innerHTML =
        now.getDate() + " " + months[now.getMonth()] + " " + now.getFullYear();
}

updateClock();
setInterval(updateClock, 1000);

// ===== WETTER =====
function weatherIcon(code) {
    if (code === 0) return "â˜€ï¸";
    if (code === 1) return "ðŸŒ¤ï¸";
    if (code === 2) return "â›…";
    if (code === 3) return "â˜ï¸";
    if (code >= 45 && code <= 48) return "ðŸŒ«ï¸";
    if (code >= 51 && code <= 57) return "ðŸŒ¦ï¸";
    if (code >= 61 && code <= 67) return "ðŸŒ§ï¸";
    if (code >= 71 && code <= 77) return "â„ï¸";
    if (code >= 95 && code <= 99) return "â›ˆï¸";
    return "";
}

function loadWeather() {
    var url = "https://api.open-meteo.com/v1/forecast"
        + "?latitude=48.2167&longitude=8.4333"
        + "&current_weather=true"
        + "&timezone=Europe/Berlin";

    fetch(url)
        .then(function(response) {
            if (!response.ok) return;
            return response.json();
        })
        .then(function(data) {
            if (!data || !data.current_weather) return;

            var temp = data.current_weather.temperature;
            var code = data.current_weather.weathercode;

            if (typeof temp !== "number" || typeof code !== "number") return;

            var icon = weatherIcon(code);
            temp = Math.round(temp);

            document.getElementById("weather").innerHTML =
                icon + " " + temp + " Â°C";
        })
        .catch(function() {
            // bewusst leer â†’ nichts anzeigen
        });
}

loadWeather();
setInterval(loadWeather, 600000);
</script>
</body>
</html>
